@import url("https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap");

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
    :root {
        --background: 0 0% 98%;
        --foreground: 150 10% 15%;

        --card: 0 0% 100%;
        --card-foreground: 150 10% 15%;

        --popover: 0 0% 100%;
        --popover-foreground: 150 10% 15%;

        --primary: 108 45% 52%;
        --primary-foreground: 0 0% 100%;

        --secondary: 108 30% 95%;
        --secondary-foreground: 108 45% 35%;

        --muted: 108 15% 94%;
        --muted-foreground: 150 10% 45%;

        --accent: 108 35% 90%;
        --accent-foreground: 108 45% 30%;

        --destructive: 0 84% 60%;
        --destructive-foreground: 0 0% 100%;

        --border: 108 20% 88%;
        --input: 108 20% 88%;
        --ring: 108 45% 52%;

        --radius: 0.75rem;

        --sidebar-background: 0 0% 100%;
        --sidebar-foreground: 150 10% 35%;
        --sidebar-primary: 108 45% 52%;
        --sidebar-primary-foreground: 0 0% 100%;
        --sidebar-accent: 108 35% 95%;
        --sidebar-accent-foreground: 108 45% 35%;
        --sidebar-border: 108 20% 92%;
        --sidebar-ring: 108 45% 52%;

        /* Custom gradients */
        --gradient-primary: linear-gradient(135deg, hsl(108 45% 52%) 0%, hsl(108 50% 42%) 100%);
        --gradient-subtle: linear-gradient(180deg, hsl(108 20% 98%) 0%, hsl(108 15% 94%) 100%);
        --gradient-card: linear-gradient(135deg, hsl(0 0% 100%) 0%, hsl(108 20% 98%) 100%);

        /* Shadows */
        --shadow-sm: 0 1px 2px 0 hsl(150 10% 15% / 0.05);
        --shadow-md: 0 4px 6px -1px hsl(150 10% 15% / 0.1), 0 2px 4px -2px hsl(150 10% 15% / 0.1);
        --shadow-lg: 0 10px 15px -3px hsl(150 10% 15% / 0.1), 0 4px 6px -4px hsl(150 10% 15% / 0.1);
        --shadow-primary: 0 4px 14px 0 hsl(108 45% 52% / 0.3);
        --shadow-card: 0 1px 3px 0 hsl(150 10% 15% / 0.08);

        /* ========================================
           SPACING SCALE (base 4px, prefer 8px multiples)
           ======================================== */
        --space-1: 0.25rem; /* 4px - minimal gaps */
        --space-2: 0.5rem; /* 8px - compact padding, icon spacing */
        --space-3: 0.75rem; /* 12px - small gaps */
        --space-4: 1rem; /* 16px - default padding, mobile gutters */
        --space-5: 1.25rem; /* 20px - medium padding */
        --space-6: 1.5rem; /* 24px - card padding desktop, section gap mobile */
        --space-8: 2rem; /* 32px - section gap tablet */
        --space-10: 2.5rem; /* 40px - section gap desktop */
        --space-12: 3rem; /* 48px - large desktop spacing */

        /* ========================================
           CONTAINER
           ======================================== */
        --container-max: 1200px;
        --container-padding: var(--space-4);
        --container-padding-md: var(--space-6);

        /* ========================================
           SECTION SPACING (reduced by ~30%)
           ======================================== */
        --section-py-sm: var(--space-4); /* mobile: 16px */
        --section-py-md: var(--space-6); /* tablet: 24px */
        --section-py-lg: var(--space-10); /* desktop: 40px */

        /* ========================================
           TOUCH TARGETS
           ======================================== */
        --touch-target-min: 44px;

        /* ========================================
           ARTICLE CARD TOKENS
           ======================================== */
        --card-padding-sm: var(--space-4); /* 16px mobile */
        --card-padding-md: var(--space-6); /* 24px desktop */
        --card-radius: 0.5rem; /* 8px */
        --card-line-height: 1.5;

        /* ========================================
           TYPOGRAPHY SCALE
           ======================================== */
        --text-xs: 0.75rem; /* 12px */
        --text-sm: 0.875rem; /* 14px */
        --text-base: 1rem; /* 16px */
        --text-lg: 1.25rem; /* 20px */
        --text-xl: 1.5rem; /* 24px */
        --text-2xl: 2rem; /* 32px */
        --text-3xl: 2.5rem; /* 40px */
        --text-4xl: 3rem; /* 48px */
    }

    .dark {
        --background: 150 15% 8%;
        --foreground: 108 15% 95%;

        --card: 150 15% 12%;
        --card-foreground: 108 15% 95%;

        --popover: 150 15% 12%;
        --popover-foreground: 108 15% 95%;

        --primary: 108 45% 52%;
        --primary-foreground: 0 0% 100%;

        --secondary: 150 15% 18%;
        --secondary-foreground: 108 30% 80%;

        --muted: 150 15% 18%;
        --muted-foreground: 108 15% 60%;

        --accent: 150 15% 20%;
        --accent-foreground: 108 30% 85%;

        --destructive: 0 62% 40%;
        --destructive-foreground: 0 0% 100%;

        --border: 150 15% 20%;
        --input: 150 15% 20%;
        --ring: 108 45% 52%;

        --sidebar-background: 150 15% 10%;
        --sidebar-foreground: 108 15% 85%;
        --sidebar-primary: 108 45% 52%;
        --sidebar-primary-foreground: 0 0% 100%;
        --sidebar-accent: 150 15% 18%;
        --sidebar-accent-foreground: 108 30% 80%;
        --sidebar-border: 150 15% 18%;
        --sidebar-ring: 108 45% 52%;

        --gradient-primary: linear-gradient(135deg, hsl(108 45% 52%) 0%, hsl(108 50% 38%) 100%);
        --gradient-subtle: linear-gradient(180deg, hsl(150 15% 10%) 0%, hsl(150 15% 8%) 100%);
        --gradient-card: linear-gradient(135deg, hsl(150 15% 12%) 0%, hsl(150 15% 10%) 100%);
    }

    .maplibregl-popup-content {
        @apply bg-transparent! shadow-none! p-0! rounded-none!;
    }

    .maplibregl-popup-tip {
        @apply hidden!;
    }
}

@layer base {
    * {
        @apply border-border;
    }

    body {
        @apply bg-background text-foreground font-sans antialiased;
        font-family: "Plus Jakarta Sans", sans-serif;
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
        font-family: "Plus Jakarta Sans", sans-serif;
        @apply font-semibold tracking-tight;
    }
}

@layer utilities {
    .gradient-primary {
        background: var(--gradient-primary);
    }

    .gradient-subtle {
        background: var(--gradient-subtle);
    }

    .gradient-card {
        background: var(--gradient-card);
    }

    .shadow-primary {
        box-shadow: var(--shadow-primary);
    }

    .animate-fade-in {
        animation: fadeIn 0.3s ease-out;
    }

    .animate-slide-up {
        animation: slideUp 0.4s ease-out;
    }

    .animate-scale-in {
        animation: scaleIn 0.3s ease-out;
    }

    @keyframes fadeIn {
        from {
            opacity: 0;
        }
        to {
            opacity: 1;
        }
    }

    @keyframes slideUp {
        from {
            opacity: 0;
            transform: translateY(10px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    @keyframes scaleIn {
        from {
            opacity: 0;
            transform: scale(0.95);
        }
        to {
            opacity: 1;
            transform: scale(1);
        }
    }
}

/* TipTap Editor Styles */
.ProseMirror {
    outline: none;
}

.ProseMirror p {
    margin-top: 0.75em;
    margin-bottom: 0.75em;
}

.ProseMirror p:first-child {
    margin-top: 0;
}

.ProseMirror p:last-child {
    margin-bottom: 0;
}

.ProseMirror p.is-editor-empty:first-child::before {
    content: attr(data-placeholder);
    float: left;
    color: hsl(var(--muted-foreground));
    pointer-events: none;
    height: 0;
}

.ProseMirror ul,
.ProseMirror ol {
    margin-top: 0.75em;
    margin-bottom: 0.75em;
    padding-left: 1.5em;
}

.ProseMirror ul {
    list-style-type: disc;
}

.ProseMirror ol {
    list-style-type: decimal;
}

.ProseMirror li {
    margin-top: 0.25em;
    margin-bottom: 0.25em;
}

.ProseMirror li > p {
    margin: 0;
}

.ProseMirror blockquote {
    border-left: 3px solid hsl(var(--border));
    margin: 0.75em 0;
    padding-left: 1em;
    color: hsl(var(--muted-foreground));
}

.ProseMirror code {
    background-color: hsl(var(--muted));
    border-radius: 0.25rem;
    padding: 0.2em 0.4em;
    font-size: 0.875em;
}

.ProseMirror pre {
    background-color: hsl(var(--muted));
    border-radius: 0.5rem;
    padding: 0.75em 1em;
    margin: 0.75em 0;
    overflow-x: auto;
}

.ProseMirror pre code {
    background: none;
    padding: 0;
    font-size: inherit;
}

/* Forum content display styles (used with prose class) */
.prose p {
    margin-top: 0.75em;
    margin-bottom: 0.75em;
}

.prose p:first-child {
    margin-top: 0;
}

.prose p:last-child {
    margin-bottom: 0;
}

.prose ul {
    list-style-type: disc;
    margin-top: 0.75em;
    margin-bottom: 0.75em;
    padding-left: 1.5em;
}

.prose ol {
    list-style-type: decimal;
    margin-top: 0.75em;
    margin-bottom: 0.75em;
    padding-left: 1.5em;
}

.prose li {
    margin-top: 0.25em;
    margin-bottom: 0.25em;
}

.prose li > p {
    margin: 0;
}

.prose blockquote {
    border-left: 3px solid hsl(var(--border));
    margin: 0.75em 0;
    padding-left: 1em;
    color: hsl(var(--muted-foreground));
    font-style: italic;
}

.prose code {
    background-color: hsl(var(--muted));
    border-radius: 0.25rem;
    padding: 0.2em 0.4em;
    font-size: 0.875em;
}

.prose pre {
    background-color: hsl(var(--muted));
    border-radius: 0.5rem;
    padding: 0.75em 1em;
    margin: 0.75em 0;
    overflow-x: auto;
}

.prose pre code {
    background: none;
    padding: 0;
}

.prose a {
    color: hsl(var(--primary));
    text-decoration: underline;
}

.prose a:hover {
    opacity: 0.8;
}
